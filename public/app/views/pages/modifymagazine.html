<script type="text/javascript" src="app/assets/widgets/parsley/parsley.js"></script>
<div ng-controller="EditMagazineController as magazine">
    <div id="page-title">

        <h2>{{magazine.stat}} Magazine</h2>
    </div>
    <div class="panel">

        <div class="panel-body">

            <h3 class="title-hero">{{magazine.stat}} a new Magazine</h3>
        </div>
        <div class="example-box-wrapper">

            <form class="form-horizontal bordered-row" data-parsley-validate id="demo-form" method="post" ng-controller="EditMagazineController as magazine" ng-submit="magazine.update_magazine()">

                <div class="form-group">

                    <label class="control-label col-sm-3">Magazine title</label>
                    <div class="col-sm-6" ng-if="magazine.stat=='update'">

                        <input type="text" class="form-control" name="title" placeholder="Enter title" ng-model="magazine.formData.title" required ng-value="magazine.magazine_data.title">
                    </div>
                    <div class="col-sm-6" ng-if="magazine.stat=='delete' || magazine.stat=='view'">

                        <input type="text" class="form-control" name="title" placeholder="Enter title" ng-model="magazine.formData.title" required ng-value="magazine.magazine_data.title" readonly>
                    </div>
                </div>
                <div class="form-group">

                    <label class="control-label col-sm-3">Cover Photo</label>
                    <div class="col-sm-6" ng-if="magazine.stat=='update'">

                        <div class="fileinput fileinput-new" data-provides="fileinput">
                            <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 200px; height: 150px;">

                                <img style="width:200px;height: 150px" ngf-thumbnail="magazine.cover_image || 'app/uploads/{{magazine.magazine_data.cover_image}}'" src="app/uploads/{{magazine.magazine_data.cover_image}}"/>
                            </div>
                            <div>
                                <span class="btn btn-default btn-file">
                                    <span class="fileinput-new">Select Cover Photo</span>
                                    <span class="fileinput-exists">Change</span>
                                    <input type="file" ngf-select name="cover_image" ngf-pattern="'image/*'" accept="image/*" ngf-max-size="5MB" ng-model="magazine.cover_image">
                                </span>
                                <i ng-show="magazine.upload.file.$error.required">*required</i><br>
                                <i ng-show="magazine.upload.file.$error.maxSize">File too large
                                    {{up.file.size / 1000000|number:1}}MB: max 5M</i>
                                <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6" ng-if="magazine.stat=='delete' || magazine.stat=='view'">

                        <div class="fileinput fileinput-new" data-provides="fileinput">
                            <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 200px; height: 150px;">

                                <img style="width:200px;height: 150px" src="app/uploads/{{magazine.magazine_data.cover_image}}"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">

                    <label class="control-label col-sm-3">Magazine</label>
                    <div class="col-sm-6" ng-if="magazine.stat=='update'">

                        <div class="fileinput fileinput-new" data-provides="fileinput">
                            <span class="btn btn-primary btn-file">
                                <span class="fileinput-new">Select file</span>
                                <span class="fileinput-exists">Change</span>
                                <input type="file" ngf-select name="magazine" ngf-pattern="'application/pdf'" accept="application/pdf" ngf-max-size="5MB" ng-model="magazine.magazine">
                            </span>
                            <span class="fileinput-filename"></span>
                            <a href="#" class="close fileinput-exists" data-dismiss="fileinput" style="float: none">&times;</a>
                        </div>
                    </div>
                    <div class="col-sm-6" ng-if="magazine.stat=='delete' || magazine.stat=='view'">

                        <div class="fileinput fileinput-new" data-provides="fileinput">
                            <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 150px; height: 150px;">

                                <a href="app/uploads/{{magazine.magazine_data.document}}" download><img style="width:200px;height: 150px" src="app/uploads/pdficon.jpg"/></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">

                    <label class="control-label col-sm-3">Magazine status</label>
                    <div class="col-sm-6" ng-if="magazine.stat=='update'">

                        <select class="form-control" name="status" ng-model="magazine.formData.status" placeholder="Select magazine status" ng-value="magazine.magazine_data.status" required>

                            <option value="published">Published</option>
                            <option value="unpublished">UnPublished</option>
                        </select>
                    </div>
                    <div class="col-sm-6" ng-if="magazine.stat=='delete' || magazine.stat=='view'">

                        <select class="form-control" name="status" ng-model="magazine.formData.status" placeholder="Select magazine status" ng-value="magazine.magazine_data.status" required readonly>

                            <option value="published">Published</option>
                            <option value="unpublished">UnPublished</option>
                        </select>
                    </div>
                </div>
                <input type="hidden" name="cus_id" ng-model="magazine.formData.mag_id" ng-value="magazine.magazine_data.mag_id">
                <input type="hidden" name="status" ng-model="magazine.formData.action" ng-value="magazine.magazine_data.action">
                <input type="hidden" name="old_image" ng-model="magazine.formData.old_image" ng-value="magazine.magazine_data.cover_image">
                <input type="hidden" name="old_document" ng-model="magazine.formData.old_document" ng-value="magazine.magazine_data.document">
                <div class="col-sm-offset-3 col-sm-6">

                    <button class="btn btn-primary" type="submit">{{magazine.button_text}}</button>
                    <button class="btn btn-default" type="reset">Reset</button>
                </div>
            </form>
        </div>
    </div>
</div>
